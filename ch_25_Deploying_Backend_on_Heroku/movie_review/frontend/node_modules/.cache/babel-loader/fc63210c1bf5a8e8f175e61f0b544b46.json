{"ast":null,"code":"var _jsxFileName = \"/home/telix/MERN_Stack_Build_and_Depoly_a_Full_Stack/ch_20_Login_Component/movie_review/frontend/src/components/add-review.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport MovieDataService from \"../services/movies\";\nimport { Link } from 'react-router-dom';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddReview = props => {\n  _s();\n\n  let editing = false;\n  let initialReviewState = \"\";\n\n  if (props.location.state && props.location.state.currentReview) {\n    editing = true;\n    initialReviewState = props.location.state.currentReview.review;\n  }\n\n  const [review, setReview] = useState(initialReviewState);\n  const [submitted, setSubmitted] = useState(false);\n\n  const onChangeReview = e => {\n    const review = e.target.value;\n    setReview(review);\n  };\n\n  const saveReview = () => {\n    var data = {\n      review: review,\n      name: props.user.name,\n      user_id: props.user.id,\n      movie_id: props.match.params.id // get the movie id fom the url\n\n    };\n\n    if (editing) {\n      // get existing review id\n      data.review_id = props.location.stat.currentReview(data).then(response => {\n        setSubmitted(true);\n        console.log(response.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    } else {\n      MovieDataService.createReview(data).then(response => {\n        setSubmitted(true);\n        console.log(response.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\" \", submitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Review submitted successfully\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/movies/\" + props.match.params.id,\n        children: \"Back to Movie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: [editing ? \"Edit\" : \"Create\", \" Review\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          require: true,\n          value: review,\n          onChangeReview: onChangeReview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: saveReview,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddReview, \"7DuPQXbCnvVp952DHKR3Wy6AMWQ=\");\n\n_c = AddReview;\nexport default AddReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddReview\");","map":{"version":3,"sources":["/home/telix/MERN_Stack_Build_and_Depoly_a_Full_Stack/ch_20_Login_Component/movie_review/frontend/src/components/add-review.js"],"names":["React","useState","MovieDataService","Link","Form","Button","AddReview","props","editing","initialReviewState","location","state","currentReview","review","setReview","submitted","setSubmitted","onChangeReview","e","target","value","saveReview","data","name","user","user_id","id","movie_id","match","params","review_id","stat","then","response","console","log","catch","createReview"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport MovieDataService from \"../services/movies\";\nimport { Link } from 'react-router-dom';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\n\nconst AddReview = props => {\n\n\t\tlet editing = false;\n\t\tlet initialReviewState = \"\";\n\n\n\t\tif( props.location.state && props.location.state.currentReview ){\n\t\t\t\tediting = true;\n\t\t\t\tinitialReviewState = props.location.state.currentReview.review;\n\t\t}\n\n\t\tconst [ review, setReview ] = useState(initialReviewState);\n\n\t\tconst [ submitted, setSubmitted ] = useState(false);\n\n\t\tconst onChangeReview = e =>{\n\t\t\t\tconst review = e.target.value;\n\t\t\t\tsetReview(review);\n\t\t}\n\n\t\tconst saveReview = () => {\n\t\t\t\tvar data = {\n\t\t\t\t\t\treview : review,\n\t\t\t\t\t\tname: props.user.name,\n\t\t\t\t\t\tuser_id: props.user.id,\n\t\t\t\t\t\tmovie_id: props.match.params.id // get the movie id fom the url\n\t\t\t\t}\n\n\t\t\t\tif(editing){\n\t\t\t\t\t\t// get existing review id\n\t\t\t\t\t\tdata.review_id = props.location.stat.currentReview(data)\n\t\t\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\t\t\t\tsetSubmitted(true);\n\t\t\t\t\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t\t\t\t}).catch( e => { console.log(e); } )\n\t\t\t\t}else{\n\t\t\t\t\t\tMovieDataService.createReview(data)\n\t\t\t\t\t\t\t\t.then(response => { \n\t\t\t\t\t\t\t\t\t\tsetSubmitted(true); \n\t\t\t\t\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch( e => {console.log(e)} );\n\t\t\t\t\t\t\n\t\t\t\t}\n\t\t}\n\n\t\treturn(\n\t\t\t\t<div> {\n\t\t\t\t\t\tsubmitted? ( \n\t\t\t\t\t\t\t\t<div> \n\t\t\t\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t\t\t\t\tReview submitted successfully \n\t\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t\t<Link to={\"/movies/\" + props.match.params.id}>\n\t\t\t\t\t\t\t\t\t\t\t\tBack to Movie\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ editing? \"Edit\" : \"Create\" } Review \n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequire\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={review}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeReview={onChangeReview}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={saveReview}>\n\t\t\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t);\n\t\t\n\n\n}\n\n\nexport default AddReview;\t\n"]},"metadata":{},"sourceType":"module"}